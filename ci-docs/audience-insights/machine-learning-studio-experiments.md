---
title: Machine Learning Studio (классикалық) бағдарламасының тәжірибелері
description: Dynamics 365 Customer Insights бағдарламасындағы Machine Learning Studio (классикалық) үлгілерін пайдаланыңыз.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: kk-KZ
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669025"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="94921-103">Azure Machine Learning Studio (классикалық) негізіндегі үлгілерді пайдалану</span><span class="sxs-lookup"><span data-stu-id="94921-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="94921-104">Dynamics 365 Customer Insights бағдарламасындағы бірыңғай деректер қосымша бизнес түсініктерін қалыптастыра алатын компьютерлік оқыту модельдерін құрудың көзі болып табылады.</span><span class="sxs-lookup"><span data-stu-id="94921-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="94921-105">Өз реттемелі үлгілеріңізді пайдалану үшін Customer Insights жүйесі Machine Learning Studio (классикалық) бағдарламасымен бірігеді.</span><span class="sxs-lookup"><span data-stu-id="94921-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="94921-106">Azure Machine Learning бағдарламасында жасалған модельдер Customer Insights жүйесімен қалай біріктірілгенін көру үшін [Azure Machine Learning тәжірибелері](azure-machine-learning-experiments.md) бөлімін қараңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="94921-107">Алғышарттар</span><span class="sxs-lookup"><span data-stu-id="94921-107">Prerequisites</span></span>

- <span data-ttu-id="94921-108">Customer Insights бағдарламасына қатынасу</span><span class="sxs-lookup"><span data-stu-id="94921-108">Access to Customer Insights</span></span>
- <span data-ttu-id="94921-109">Белсенді Azure Enterprise жазылымы</span><span class="sxs-lookup"><span data-stu-id="94921-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="94921-110">Бірыңғай тұтынушы профильдері</span><span class="sxs-lookup"><span data-stu-id="94921-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="94921-111">[Нысанды Azure Blob сақтау орнына экспорттау](export-azure-blob-storage.md) параметрін орнату</span><span class="sxs-lookup"><span data-stu-id="94921-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="94921-112">Machine Learning Studio Classic бағдарламасын орнату</span><span class="sxs-lookup"><span data-stu-id="94921-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="94921-113">Алғашқы қадамда біз арнайы жұмыс кеңістігін құрып, Machine Learning Studio (классикалық) бағдарламасын ашуымыз керек.</span><span class="sxs-lookup"><span data-stu-id="94921-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="94921-114">[https://www.portal.azure.com](https://www.portal.azure.com/) сілтемесі бойынша өтіп, жүйеге кіріңіз.</span><span class="sxs-lookup"><span data-stu-id="94921-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="94921-115">**Ресурс жасау** параметрін таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="94921-116">**Machine Learning студия жұмыс кеңістігін** және **Жасау** пәрменін таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="94921-117">[Жұмыс кеңістігін жасау](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace) үшін қажетті мәліметтерді енгізіңіз.</span><span class="sxs-lookup"><span data-stu-id="94921-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="94921-118">Импорттау үшін жоспарлап отырған деректер көлеміне негізделе отырып, **Веб қызмет жоспарының бағалар жинағы** опциясын таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="94921-119">Ең жақсы өнімділік үшін, сізге географиялық жағынан ең жақын **Орын** мәнін таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="94921-120">Ресурсты жасағаннан кейін Machine Learning студия жұмыс кеңістігінің бақылау тақтасы пайда болады.</span><span class="sxs-lookup"><span data-stu-id="94921-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="94921-121">**Machine Learning студиясын іске қосу** пәрменін таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Azure Machine Learning студиясының пайдаланушы интерфейсі](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="94921-123">Azure Machine Learning студиясымен жұмыс істеу</span><span class="sxs-lookup"><span data-stu-id="94921-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="94921-124">Енді жаңа сынақ жасауға немесе сынама галереясынан қолданыстағы сынақ үлгісін импорттауға болады.</span><span class="sxs-lookup"><span data-stu-id="94921-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="94921-125">Үш стандартты сценарий бойынша тәжірибе үлгілері бар:</span><span class="sxs-lookup"><span data-stu-id="94921-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="94921-126">Кету болжамы</span><span class="sxs-lookup"><span data-stu-id="94921-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="94921-127">Тұтынушылардың жарамдылық кезеңінің мәні</span><span class="sxs-lookup"><span data-stu-id="94921-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="94921-128">Өнім ұсынысы немесе келесі үздік әрекет</span><span class="sxs-lookup"><span data-stu-id="94921-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="94921-129">Егер жаңа сынақ жасасаңыз немесе галереядан сынақ үлгісін пайдалансаңыз, **Деректерді импорттау** сипаттарын конфигурациялау қажет.</span><span class="sxs-lookup"><span data-stu-id="94921-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="94921-130">Деректеріңізді қамтитын Azure Blob сақтау орнына кіру үшін қадамдық тәжірибені пайдаланыңыз немесе мәліметтерді тікелей беріңіз.</span><span class="sxs-lookup"><span data-stu-id="94921-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure Machine Learning студиясының сынағы](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="94921-132">Енді деректерді тазалау және алдын ала өңдеу, мүмкіндіктерді шығарып алу және сәйкес модельді дайындау үшін теңшелмелі өңдеу үдерістер тізбегін құруға болады.</span><span class="sxs-lookup"><span data-stu-id="94921-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="94921-133">Үлгі өнімділігін сынаңыз және оңтайландырыңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="94921-134">Модель сапасымен қанағаттанған кезде **Веб-қызметті орнату** > **Болжалды веб-қызмет** тармағын таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="94921-135">Бұл опция дайындалған модель мен мүмкіндіктер жинағының үдерістер тізбегін дайындау сынағынан болжалды қызметке импорттайды.</span><span class="sxs-lookup"><span data-stu-id="94921-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="94921-136">Болжалды қызмет болжамдар жасау үшін дайындау сынағында пайдаланылатын схемасы бар басқа кіріс деректер жиынын алуы мүмкін.</span><span class="sxs-lookup"><span data-stu-id="94921-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Болжалды веб-қызметті орнату](media/predictive-webservice-control.png)

1. <span data-ttu-id="94921-138">Болжалды веб-қызмет сынағы сәтті аяқталғаннан кейін оны автоматты жоспарлау үшін қолдана аласыз.</span><span class="sxs-lookup"><span data-stu-id="94921-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="94921-139">Веб-қызметтің Customer Insights қызметімен жұмыс істеуі үшін **Веб-қызметті қолдану** > **Веб-қызметтің [Жаңа] алдын ала қарау нұсқасын қолдану** тармағын таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="94921-140">[Веб-қызметті қолдану туралы қосымша ақпарат алыңыз](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="94921-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Болжалды веб-қызметті қолдану](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="94921-142">Галереядағы сынама модельдер</span><span class="sxs-lookup"><span data-stu-id="94921-142">Sample models from the gallery</span></span>

<span data-ttu-id="94921-143">Осы мақаладағы модельдер үшін Contoso қонақ үйінің жалған сценарийін пайдаланамыз.</span><span class="sxs-lookup"><span data-stu-id="94921-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="94921-144">Contoso қонақ үйі келесі деректерді жинайды:</span><span class="sxs-lookup"><span data-stu-id="94921-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="94921-145">Қонақ үйде қалу әрекетінен тұратын CRM деректері.</span><span class="sxs-lookup"><span data-stu-id="94921-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="94921-146">Деректер жиыны әрбір тіркелген тұтынушының қалу күндері туралы ақпараттан тұрады.</span><span class="sxs-lookup"><span data-stu-id="94921-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="94921-147">Ол, сондай-ақ брондау, бөлме түрлері, шығын мәліметтері және т.б. туралы ақпараттан тұрады.</span><span class="sxs-lookup"><span data-stu-id="94921-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="94921-148">Деректер 2014 жылдың қаңтар айынан бастап 2018 жылдың қаңтар айына дейінгі төрт жылды қамтиды.</span><span class="sxs-lookup"><span data-stu-id="94921-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="94921-149">Қонақ үй қонақтарының тұтынушы профильдері.</span><span class="sxs-lookup"><span data-stu-id="94921-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="94921-150">Бұл профильдер әрбір тұтынушы, соның ішінде аттары, туған күні, пошталық мекенжайы, жынысы және телефон нөмірі туралы ақпараттан тұрады.</span><span class="sxs-lookup"><span data-stu-id="94921-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="94921-151">Спа, кір жуатын орын, WiFi немесе курьер сияқты қонақ үй тарапынан ұсынылатын қызметтерді пайдалану.</span><span class="sxs-lookup"><span data-stu-id="94921-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="94921-152">Бұл ақпарат әрбір тіркелген тұтынушы үшін тіркеледі.</span><span class="sxs-lookup"><span data-stu-id="94921-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="94921-153">Әдепкі бойынша қызметтерді пайдалану қалумен байланысты.</span><span class="sxs-lookup"><span data-stu-id="94921-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="94921-154">Кейбір жағдайларда тұтынушылар қонақ үйде қалмай, қызметтерді пайдалана алады.</span><span class="sxs-lookup"><span data-stu-id="94921-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="94921-155">Кету талдауы</span><span class="sxs-lookup"><span data-stu-id="94921-155">Churn Analysis</span></span>

<span data-ttu-id="94921-156">Кету талдауы түрлі бизнес аймақтарына қолданылады.</span><span class="sxs-lookup"><span data-stu-id="94921-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="94921-157">Бұл мысалда біз жоғарыда сипатталғандай, әсіресе қонақ үй қызметтері аясындағы қызметтерден бас тартуды қарастырамыз.</span><span class="sxs-lookup"><span data-stu-id="94921-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="94921-158">Ол кету моделінің кез келген басқа түріне арналған бастапқы нүкте ретінде пайдаланылатын үздіксіз модельдің үдерістер тізбегінің жұмыс мысалын ұсынады.</span><span class="sxs-lookup"><span data-stu-id="94921-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="94921-159">Кету анықтамасы</span><span class="sxs-lookup"><span data-stu-id="94921-159">Definition of Churn</span></span>

<span data-ttu-id="94921-160">Кету анықтамасы сценарийге байланысты өзгеруі мүмкін.</span><span class="sxs-lookup"><span data-stu-id="94921-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="94921-161">Бұл мысалда өткен жылы қонақ үйде болған қонақ "кеткен" деп белгіленуі керек.</span><span class="sxs-lookup"><span data-stu-id="94921-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="94921-162">Тәжірибе үлгісін галереядан импорттауға болады.</span><span class="sxs-lookup"><span data-stu-id="94921-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="94921-163">Алдымен **Қонақ үйде қалу әрекеті**, **Тұтынушы деректері** және **Қызметті пайдалану деректері** үшін деректердің Azure Blob сақтау орнынан импортталатынына көз жеткізіңіз.</span><span class="sxs-lookup"><span data-stu-id="94921-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Кету моделі үшін деректерді импорттау](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="94921-165">Мүмкіндіктер жиыны</span><span class="sxs-lookup"><span data-stu-id="94921-165">Featurization</span></span>

<span data-ttu-id="94921-166">Кету анықтамасына байланысты алдымен белгіге әсер ететін өңделмеген мүмкіндіктерді анықтаймыз.</span><span class="sxs-lookup"><span data-stu-id="94921-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="94921-167">Содан соң осы өңделмеген мүмкіндіктерді компьютерлік оқыту модельдерімен пайдалануға болатын сандық мүмкіндіктерге айналдырамыз.</span><span class="sxs-lookup"><span data-stu-id="94921-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="94921-168">*Тұтынушы идентификаторы* арқылы біз осы кестелерге қосылу үшін деректерді біріктіру Customer Insights жүйесінде орын алады.</span><span class="sxs-lookup"><span data-stu-id="94921-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Импортталған деректерді біріктіру](media/join-imported-data.png)

<span data-ttu-id="94921-170">Кету талдауы үшін модель құрудың мүмкіндіктер жиыны аздап күрделі болуы мүмкін.</span><span class="sxs-lookup"><span data-stu-id="94921-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="94921-171">Деректер уақыт функциясы болып табылады, бұл ретте жаңа қонақ үй әрекеті күнделікті жазылады.</span><span class="sxs-lookup"><span data-stu-id="94921-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="94921-172">Мүмкіндіктер жиынын қолданған кезде динамикалық деректерден статикалық мүмкіндіктер құруын қалаймыз.</span><span class="sxs-lookup"><span data-stu-id="94921-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="94921-173">Бұл жағдайда бір жылдық жылжымалы тереземен қонақ үй әрекетінен бірнеше мүмкіндік құрамыз.</span><span class="sxs-lookup"><span data-stu-id="94921-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="94921-174">Сондай-ақ тікелей кодтауды пайдаланып, бөлме түрі немесе брондау түрі сияқты санаттық ерекшеліктерді бөлек мүмкіндіктерге кеңейтеміз.</span><span class="sxs-lookup"><span data-stu-id="94921-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="94921-175">Мүмкіндіктердің соңғы тізімі:</span><span class="sxs-lookup"><span data-stu-id="94921-175">Final list of features:</span></span>

| <span data-ttu-id="94921-176">**Сан**</span><span class="sxs-lookup"><span data-stu-id="94921-176">**Number**</span></span>  | <span data-ttu-id="94921-177">**Бастапқы_баған**</span><span class="sxs-lookup"><span data-stu-id="94921-177">**Original_Column**</span></span>          | <span data-ttu-id="94921-178">**Туынды мүмкіндіктер**</span><span class="sxs-lookup"><span data-stu-id="94921-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="94921-179">1</span><span class="sxs-lookup"><span data-stu-id="94921-179">1</span></span>           | <span data-ttu-id="94921-180">Бөлме түрі</span><span class="sxs-lookup"><span data-stu-id="94921-180">Room Type</span></span>                    | <span data-ttu-id="94921-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="94921-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="94921-182">2</span><span class="sxs-lookup"><span data-stu-id="94921-182">2</span></span>           | <span data-ttu-id="94921-183">Тапсырыс беру түрі</span><span class="sxs-lookup"><span data-stu-id="94921-183">Booking Type</span></span>                 | <span data-ttu-id="94921-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="94921-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="94921-185">3</span><span class="sxs-lookup"><span data-stu-id="94921-185">3</span></span>           | <span data-ttu-id="94921-186">Саяхаттау санаты</span><span class="sxs-lookup"><span data-stu-id="94921-186">Travel Category</span></span>              | <span data-ttu-id="94921-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="94921-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="94921-188">4</span><span class="sxs-lookup"><span data-stu-id="94921-188">4</span></span>           | <span data-ttu-id="94921-189">Жұмсалған доллар</span><span class="sxs-lookup"><span data-stu-id="94921-189">Dollars Spent</span></span>                | <span data-ttu-id="94921-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="94921-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="94921-191">5</span><span class="sxs-lookup"><span data-stu-id="94921-191">5</span></span>           | <span data-ttu-id="94921-192">Тіркелу және шығу күндері</span><span class="sxs-lookup"><span data-stu-id="94921-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="94921-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="94921-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="94921-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="94921-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="94921-195">6</span><span class="sxs-lookup"><span data-stu-id="94921-195">6</span></span>           | <span data-ttu-id="94921-196">Қызметті пайдалану</span><span class="sxs-lookup"><span data-stu-id="94921-196">Service Usage</span></span>                | <span data-ttu-id="94921-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="94921-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="94921-198">Модельді таңдау</span><span class="sxs-lookup"><span data-stu-id="94921-198">Model selection</span></span>

<span data-ttu-id="94921-199">Енді пайдаланылатын оңтайлы алгоритмді таңдауымыз қажет.</span><span class="sxs-lookup"><span data-stu-id="94921-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="94921-200">Бұл жағдайда көптеген функциялар санаттық ерекшеліктерге негізделген.</span><span class="sxs-lookup"><span data-stu-id="94921-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="94921-201">Әдепкі бойынша тармаққа негізделген модельдер жақсы жұмыс істейді.</span><span class="sxs-lookup"><span data-stu-id="94921-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="94921-202">Егер тек сандық ерекшеліктер болса, нейрондық желілер жақсы таңдау болар еді.</span><span class="sxs-lookup"><span data-stu-id="94921-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="94921-203">Мұндай жағдайларда тірек векторларының машинасы (SVM) жақсы шешім болып табылады; дегенмен үздік нәтижеге жету үшін аздап ретке келтіру жұмысы талап етіледі.</span><span class="sxs-lookup"><span data-stu-id="94921-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="94921-204">Таңдаудың алғашқы моделі ретінде **Екі класты күшейтілген шешім қабылдау тармағын**, содан кейін екінші модель ретінде **Екі класты SVM** алдық.</span><span class="sxs-lookup"><span data-stu-id="94921-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="94921-205">Azure Machine Learning Studio бағдарламасы A/B сынағын жүргізуге мүмкіндік береді, сондықтан бір модельден емес, керісінше екеуінен бастаған жөн.</span><span class="sxs-lookup"><span data-stu-id="94921-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="94921-206">Келесі суретте Azure Machine Learning студиясындағы модельдің дайындау және бағалау үдерістер тізбегі көрсетілген:</span><span class="sxs-lookup"><span data-stu-id="94921-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Azure Machine Learning студиясындағы кету моделі](media/azure-machine-learning-model.png)

<span data-ttu-id="94921-208">Сондай-ақ модельді оңтайландырудың маңызды аспектісін, **Оңтайландыру мүмкіндігінің маңыздылығы** атты әдісті қолданамыз.</span><span class="sxs-lookup"><span data-stu-id="94921-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="94921-209">Бекітілген модельдер қандай да бір белгілі мүмкіндіктің соңғы болжамға әсер ететіні туралы ешқандай түсінік бермейді.</span><span class="sxs-lookup"><span data-stu-id="94921-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="94921-210">Мүмкіндік маңыздылығының есептегіші белгілі бір модельдің нәтижесі үшін жеке мүмкіндіктер әсерін есептеудің теңшелмелі алгоритмін пайдаланады.</span><span class="sxs-lookup"><span data-stu-id="94921-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="94921-211">Мүмкіндік маңыздылығы +1 - -1 мәндері аралығында қалпына келеді.</span><span class="sxs-lookup"><span data-stu-id="94921-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="94921-212">Теріс әсер сәйкес мүмкіндіктің нәтижеге әдеттен тыс әсер ететінін және модельден алыну керектігін білдіреді.</span><span class="sxs-lookup"><span data-stu-id="94921-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="94921-213">Оң әсер мүмкіндіктің болжамға елеулі түрде әсер ететінін білдіреді.</span><span class="sxs-lookup"><span data-stu-id="94921-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="94921-214">Бұл мәндер өзара қатынас коэффициенттері болып табылмайды, себебі олар басқа өлшемдерге жатады.</span><span class="sxs-lookup"><span data-stu-id="94921-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="94921-215">Қосымша ақпарат алу үшін [Оңтайландыру мүмкіндігінің маңыздылығы](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance) бөлімін қараңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="94921-216">Толық [кету тәжірибесі Azure AI галереясында қолжетімді](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="94921-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="94921-217">Тұтынушының ғұмырлық құндылығының болжамы</span><span class="sxs-lookup"><span data-stu-id="94921-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="94921-218">Тұтынушының ғұмырлық құндылығын (CLTV) есептеу – бизнес арқылы тұтынушыларды бағалау және бөлу үшін пайдаланатын негізгі өлшемдердің бірі.</span><span class="sxs-lookup"><span data-stu-id="94921-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="94921-219">Қонақ үй бизнесі үшін тұтынушыларды білген маңызды.</span><span class="sxs-lookup"><span data-stu-id="94921-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="94921-220">Мысалы, жақсы клиенттерден тұратын факторларды түсіну маңызды ақпарат болып табылады.</span><span class="sxs-lookup"><span data-stu-id="94921-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="94921-221">Бұл қонақ үй менеджментіне үлкен ақша төлейтін тұтынушыларын қанағаттандыру мақсатында қайсы мүмкіндіктерге назар аудару және оларды жақсарту керектігін бағалауда көмектеседі.</span><span class="sxs-lookup"><span data-stu-id="94921-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="94921-222">Бұл шешімдер тікелей сатылым мен табысқа әсер етуі мүмкін.</span><span class="sxs-lookup"><span data-stu-id="94921-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="94921-223">CLTV анықтамасы</span><span class="sxs-lookup"><span data-stu-id="94921-223">Definition of CLTV</span></span>

<span data-ttu-id="94921-224">Бұл мысалда тұтынушының CLTV келесі 365 күнде жұмсалуы күтілетін жалпы доллар сомасы ретінде анықталады.</span><span class="sxs-lookup"><span data-stu-id="94921-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="94921-225">Біз осы мәнді болжау мақсатында барлық тұтынушылар үшін соңғы үш жылдағы деректер пайдалануын жоспарлаудамыз.</span><span class="sxs-lookup"><span data-stu-id="94921-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="94921-226">Мүмкіндіктер жиыны</span><span class="sxs-lookup"><span data-stu-id="94921-226">Featurization</span></span>

<span data-ttu-id="94921-227">Бұл жағдайда мүмкіндіктер жиыны аздап кету сценарийі сияқты болады.</span><span class="sxs-lookup"><span data-stu-id="94921-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="94921-228">Дегенмен белгілер мен болжалды мәндер жоғарыда анықталғаннан басқаша.</span><span class="sxs-lookup"><span data-stu-id="94921-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="94921-229">Модельді таңдау</span><span class="sxs-lookup"><span data-stu-id="94921-229">Model selection</span></span>

<span data-ttu-id="94921-230">CLTV болжау регрессия мәселесіне жатады, себебі болжалды мән үздіксіз айнымалы оң мән болып табылады.</span><span class="sxs-lookup"><span data-stu-id="94921-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="94921-231">Мүмкіндіктердің сипаттары негізінде модельді дайындау үшін бір алгоритм ретінде **Күшейтілген шешім тармағының регрессиясы**, ал басқа алгоритм ретінде **Нейронды желі регрессиясы** опциясын таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="94921-232">Өнім ұсынысы немесе келесі үздік әрекет</span><span class="sxs-lookup"><span data-stu-id="94921-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="94921-233">Қонақ үй сценарийіндегі өнім ұсынысы қонақ үй тарапынан тұтынушыларға ұсынылатын қызметтер болып түсіндіріледі.</span><span class="sxs-lookup"><span data-stu-id="94921-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="94921-234">Мақсаты – тұтынушылар үшін тиісті қызметтерді барынша пайдаланатындай таңдау.</span><span class="sxs-lookup"><span data-stu-id="94921-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="94921-235">Бұл бейне ағыны қызметінің пайдаланушыларына арналған бейнефильм ұсыныстарына ұқсас.</span><span class="sxs-lookup"><span data-stu-id="94921-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="94921-236">Өнім ұсынысының анықтамасы немесе келесі үздік әрекет</span><span class="sxs-lookup"><span data-stu-id="94921-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="94921-237">Қонақ үй тұтынушыларының қызығушылықтарына байланысты үздік сәйкес келетін қызметтерді ұсыну арқылы мақсатты қызмет қолданудағы доллар сомасын барынша арттыру деп анықтаймыз.</span><span class="sxs-lookup"><span data-stu-id="94921-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="94921-238">Мүмкіндіктер жиыны</span><span class="sxs-lookup"><span data-stu-id="94921-238">Featurization</span></span>

<span data-ttu-id="94921-239">Кету моделі сияқты әрбір CustomerID үшін ұсыныстарды тұрақты түрде құру мақсатында қонақ үйдің ServiceCustomerID мәнін CustomerID мәнімен біріктіреміз.</span><span class="sxs-lookup"><span data-stu-id="94921-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Ұсыныс моделінің толық сипаттамасы](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="94921-241">Деректер үш түрлі нысаннан алынады, ал мүмкіндіктер солардан шығады.</span><span class="sxs-lookup"><span data-stu-id="94921-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="94921-242">Ұсыныс мәселесінің толық сипаттамасы кету не CLTV сценарийлерімен салыстырғанда ерекшеленеді.</span><span class="sxs-lookup"><span data-stu-id="94921-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="94921-243">Ұсыныс моделі мүмкіндіктердің үш жиыны түрінде берілген кіріс деректерді қажет етеді.</span><span class="sxs-lookup"><span data-stu-id="94921-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="94921-244">Модельді таңдау</span><span class="sxs-lookup"><span data-stu-id="94921-244">Model selection</span></span>

<span data-ttu-id="94921-245">Ұсыныс моделін дайындау үшін **Matchbox ұсыныс берушісін дайындау** атты алгоритмін пайдалану арқылы өнімдерді не қызметтерді болжаймыз.</span><span class="sxs-lookup"><span data-stu-id="94921-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Өнім ұсынысының алгоритмі](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="94921-247">**Matchbox ұсыныс берушісін дайындау** моделіне арналған үш кіріс порты дайындау қызметін пайдалану деректерін, тұтынушы сипаттамасын (қосымша) және қызмет сипаттамасын қабылдайды.</span><span class="sxs-lookup"><span data-stu-id="94921-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="94921-248">Модельді бағалаудың үш түрлі жолы бар.</span><span class="sxs-lookup"><span data-stu-id="94921-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="94921-249">Біреуі баға берілген элементтерді іріктеу үшін қалыптандырылған азайтылған өсім (NDCG) ұпайы есептелетін модель бағалауына арналған.</span><span class="sxs-lookup"><span data-stu-id="94921-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="94921-250">Бұл сынақта NDCG ұпайы 0,97 құрайды.</span><span class="sxs-lookup"><span data-stu-id="94921-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="94921-251">Басқа екі нұсқа бүкіл ұсынылатын қызметтер каталогі бойынша модель бағалануы немесе пайдаланушылар бұрын пайдаланбаған элементтер бойынша бағалау болып табылады.</span><span class="sxs-lookup"><span data-stu-id="94921-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="94921-252">Бүкіл қызметтер каталогі бойынша ұсыныстар үлестіруін қарастыра отырып, телефонның, WiFi және курьердің ұсынылатын үздік қызметтер қатарына жататынын байқаймыз.</span><span class="sxs-lookup"><span data-stu-id="94921-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="94921-253">Бұл қызметті қолдану туралы деректерді таратудан анықталғанға сәйкес келеді:</span><span class="sxs-lookup"><span data-stu-id="94921-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Ұсыныс моделінің шығысы](media/azure-machine-learning-model-output.png)

<span data-ttu-id="94921-255">Бүкіл [өнім ұсынысының сынағына Azure AI галереясында қатынасуға болады.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="94921-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="94921-256">Реттемелі модельдердің үлгілері</span><span class="sxs-lookup"><span data-stu-id="94921-256">Integrate custom models</span></span>

<span data-ttu-id="94921-257">Осы болжамдарды Customer Insights ішінде пайдалану үшін болжамдарды тұтынушы идентификаторларымен бірге **экспорттау** керек.</span><span class="sxs-lookup"><span data-stu-id="94921-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="94921-258">Бастапқы деректерді экспорттаған [Azure Blob сақтау орнына экспорттаңыз](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs).</span><span class="sxs-lookup"><span data-stu-id="94921-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="94921-259">Болжалды веб-қызметті ұпайларды жүйелі түрде іске қосу және жаңарту үшін жоспарлауға болады.</span><span class="sxs-lookup"><span data-stu-id="94921-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="94921-260">Тұтынушы үлгісімен жасалған деректер тұтынушының деректерін одан әрі байыту үшін қолданыла алады.</span><span class="sxs-lookup"><span data-stu-id="94921-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="94921-261">Қосымша ақпаратты [Реттелетін компьютерлік оқыту модельдері](custom-models.md) бөлімінен қараңыз.</span><span class="sxs-lookup"><span data-stu-id="94921-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
