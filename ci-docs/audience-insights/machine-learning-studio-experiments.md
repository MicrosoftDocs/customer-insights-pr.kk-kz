---
title: Machine Learning Studio (классикалық) бағдарламасының тәжірибелері
description: Dynamics 365 Customer Insights бағдарламасындағы Machine Learning Studio (классикалық) үлгілерін пайдаланыңыз.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 8a861d62bdfee6a3a82468fe1ab4a3fbbdad43d4
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: kk-KZ
ms.lasthandoff: 02/15/2021
ms.locfileid: "5270211"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a>Azure Machine Learning Studio (классикалық) негізіндегі үлгілерді пайдалану

Dynamics 365 Customer Insights бағдарламасындағы бірыңғай деректер қосымша бизнес түсініктерін қалыптастыра алатын компьютерлік оқыту модельдерін құрудың көзі болып табылады. Өз реттемелі үлгілеріңізді пайдалану үшін Customer Insights жүйесі Machine Learning Studio (классикалық) бағдарламасымен бірігеді. Azure Machine Learning бағдарламасында жасалған модельдер Customer Insights жүйесімен қалай біріктірілгенін көру үшін [Azure Machine Learning тәжірибелері](azure-machine-learning-experiments.md) бөлімін қараңыз.

## <a name="prerequisites"></a>Алғышарттар

- Customer Insights бағдарламасына қатынасу
- Белсенді Azure Enterprise жазылымы
- [Бірыңғай тұтынушы профильдері](data-unification.md)
- [Нысанды Azure Blob сақтау орнына экспорттау](export-azure-blob-storage.md) параметрін орнату

## <a name="set-up-machine-learning-studio-classic"></a>Machine Learning Studio Classic бағдарламасын орнату

Алғашқы қадамда біз арнайы жұмыс кеңістігін құрып, Machine Learning Studio (классикалық) бағдарламасын ашуымыз керек.

1. [https://www.portal.azure.com](https://www.portal.azure.com/) сілтемесі бойынша өтіп, жүйеге кіріңіз.

1. **Ресурс жасау** параметрін таңдаңыз.

1. **Machine Learning студия жұмыс кеңістігін** және **Жасау** пәрменін таңдаңыз.

1. [Жұмыс кеңістігін жасау](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace) үшін қажетті мәліметтерді енгізіңіз. Импорттау үшін жоспарлап отырған деректер көлеміне негізделе отырып, **Веб қызмет жоспарының бағалар жинағы** опциясын таңдаңыз. Ең жақсы өнімділік үшін, сізге географиялық жағынан ең жақын **Орын** мәнін таңдаңыз.

1. Ресурсты жасағаннан кейін Machine Learning студия жұмыс кеңістігінің бақылау тақтасы пайда болады. **Machine Learning студиясын іске қосу** пәрменін таңдаңыз.

   ![Azure Machine Learning студиясының пайдаланушы интерфейсі](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a>Azure Machine Learning студиясымен жұмыс істеу

Енді жаңа сынақ жасауға немесе сынама галереясынан қолданыстағы сынақ үлгісін импорттауға болады. Үш стандартты сценарий бойынша тәжірибе үлгілері бар:

- [Кету болжамы](#churn-analysis)

- [Тұтынушылардың жарамдылық кезеңінің мәні](#customer-lifetime-value-prediction)

- [Өнім ұсынысы немесе келесі үздік әрекет](#productrecommendation-or-next-best-action)

1. Егер жаңа сынақ жасасаңыз немесе галереядан сынақ үлгісін пайдалансаңыз, **Деректерді импорттау** сипаттарын конфигурациялау қажет. Деректеріңізді қамтитын Azure Blob сақтау орнына кіру үшін қадамдық тәжірибені пайдаланыңыз немесе мәліметтерді тікелей беріңіз.  

   ![Azure Machine Learning студиясының сынағы](media/azure-machine-learning-studio-experiment.png)

1. Енді деректерді тазалау және алдын ала өңдеу, мүмкіндіктерді шығарып алу және сәйкес модельді дайындау үшін теңшелмелі өңдеу үдерістер тізбегін құруға болады.

1. Үлгі өнімділігін сынаңыз және оңтайландырыңыз.

1. Модель сапасымен қанағаттанған кезде **Веб-қызметті орнату** > **Болжалды веб-қызмет** тармағын таңдаңыз. Бұл опция дайындалған модель мен мүмкіндіктер жинағының үдерістер тізбегін дайындау сынағынан болжалды қызметке импорттайды. Болжалды қызмет болжамдар жасау үшін дайындау сынағында пайдаланылатын схемасы бар басқа кіріс деректер жиынын алуы мүмкін.

   ![Болжалды веб-қызметті орнату](media/predictive-webservice-control.png)

1. Болжалды веб-қызмет сынағы сәтті аяқталғаннан кейін оны автоматты жоспарлау үшін қолдана аласыз. Веб-қызметтің Customer Insights қызметімен жұмыс істеуі үшін **Веб-қызметті қолдану** > **Веб-қызметтің [Жаңа] алдын ала қарау нұсқасын қолдану** тармағын таңдаңыз. [Веб-қызметті қолдану туралы қосымша ақпарат алыңыз](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).

   ![Болжалды веб-қызметті қолдану](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a>Галереядағы сынама модельдер

Осы мақаладағы модельдер үшін Contoso қонақ үйінің жалған сценарийін пайдаланамыз. Contoso қонақ үйі келесі деректерді жинайды:

- Қонақ үйде қалу әрекетінен тұратын CRM деректері. Деректер жиыны әрбір тіркелген тұтынушының қалу күндері туралы ақпараттан тұрады. Ол, сондай-ақ брондау, бөлме түрлері, шығын мәліметтері және т.б. туралы ақпараттан тұрады. Деректер 2014 жылдың қаңтар айынан бастап 2018 жылдың қаңтар айына дейінгі төрт жылды қамтиды.
- Қонақ үй қонақтарының тұтынушы профильдері. Бұл профильдер әрбір тұтынушы, соның ішінде аттары, туған күні, пошталық мекенжайы, жынысы және телефон нөмірі туралы ақпараттан тұрады.
- Спа, кір жуатын орын, WiFi немесе курьер сияқты қонақ үй тарапынан ұсынылатын қызметтерді пайдалану. Бұл ақпарат әрбір тіркелген тұтынушы үшін тіркеледі. Әдепкі бойынша қызметтерді пайдалану қалумен байланысты. Кейбір жағдайларда тұтынушылар қонақ үйде қалмай, қызметтерді пайдалана алады.

## <a name="churn-analysis"></a>Кету талдауы

Кету талдауы түрлі бизнес аймақтарына қолданылады. Бұл мысалда біз жоғарыда сипатталғандай, әсіресе қонақ үй қызметтері аясындағы қызметтерден бас тартуды қарастырамыз. Ол кету моделінің кез келген басқа түріне арналған бастапқы нүкте ретінде пайдаланылатын үздіксіз модельдің үдерістер тізбегінің жұмыс мысалын ұсынады.

### <a name="definition-of-churn"></a>Кету анықтамасы

Кету анықтамасы сценарийге байланысты өзгеруі мүмкін. Бұл мысалда өткен жылы қонақ үйде болған қонақ "кеткен" деп белгіленуі керек.  

Тәжірибе үлгісін галереядан импорттауға болады. Алдымен **Қонақ үйде қалу әрекеті**, **Тұтынушы деректері** және **Қызметті пайдалану деректері** үшін деректердің Azure Blob сақтау орнынан импортталатынына көз жеткізіңіз.

   ![Кету моделі үшін деректерді импорттау](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a>Мүмкіндіктер жиыны

Кету анықтамасына байланысты алдымен белгіге әсер ететін өңделмеген мүмкіндіктерді анықтаймыз. Содан соң осы өңделмеген мүмкіндіктерді компьютерлік оқыту модельдерімен пайдалануға болатын сандық мүмкіндіктерге айналдырамыз. *Тұтынушы идентификаторы* арқылы біз осы кестелерге қосылу үшін деректерді біріктіру Customer Insights жүйесінде орын алады.

   ![Импортталған деректерді біріктіру](media/join-imported-data.png)

Кету талдауы үшін модель құрудың мүмкіндіктер жиыны аздап күрделі болуы мүмкін. Деректер уақыт функциясы болып табылады, бұл ретте жаңа қонақ үй әрекеті күнделікті жазылады. Мүмкіндіктер жиынын қолданған кезде динамикалық деректерден статикалық мүмкіндіктер құруын қалаймыз. Бұл жағдайда бір жылдық жылжымалы тереземен қонақ үй әрекетінен бірнеше мүмкіндік құрамыз. Сондай-ақ тікелей кодтауды пайдаланып, бөлме түрі немесе брондау түрі сияқты санаттық ерекшеліктерді бөлек мүмкіндіктерге кеңейтеміз.  

Мүмкіндіктердің соңғы тізімі:

| **Сан**  | **Бастапқы_баған**          | **Туынды мүмкіндіктер**                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| 1           | Бөлме түрі                    | RoomTypeLargeCount, RoomTypeSmallCount                                                                                                    |
| 2           | Тапсырыс беру түрі                 | BookingTypeOnlineCount, BookingTypePhoneCallCount                                                                                         |
| 3           | Саяхаттау санаты              | TravelCategoryBusinessCount, TravelCategoryLeisureCount                                                                                   |
| 4           | Жұмсалған доллар                | TotalDollarSpent                                                                                                                          |
| 5           | Тіркелу және шығу күндері  | StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016. StayCount2015, StayCount2014                |
| 6           | Қызметті пайдалану                | UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage  |

### <a name="model-selection"></a>Модельді таңдау

Енді пайдаланылатын оңтайлы алгоритмді таңдауымыз қажет. Бұл жағдайда көптеген функциялар санаттық ерекшеліктерге негізделген. Әдепкі бойынша тармаққа негізделген модельдер жақсы жұмыс істейді. Егер тек сандық ерекшеліктер болса, нейрондық желілер жақсы таңдау болар еді. Мұндай жағдайларда тірек векторларының машинасы (SVM) жақсы шешім болып табылады; дегенмен үздік нәтижеге жету үшін аздап ретке келтіру жұмысы талап етіледі. Таңдаудың алғашқы моделі ретінде **Екі класты күшейтілген шешім қабылдау тармағын**, содан кейін екінші модель ретінде **Екі класты SVM** алдық. Azure Machine Learning Studio бағдарламасы A/B сынағын жүргізуге мүмкіндік береді, сондықтан бір модельден емес, керісінше екеуінен бастаған жөн.

Келесі суретте Azure Machine Learning студиясындағы модельдің дайындау және бағалау үдерістер тізбегі көрсетілген:

![Azure Machine Learning студиясындағы кету моделі](media/azure-machine-learning-model.png)

Сондай-ақ модельді оңтайландырудың маңызды аспектісін, **Оңтайландыру мүмкіндігінің маңыздылығы** атты әдісті қолданамыз. Бекітілген модельдер қандай да бір белгілі мүмкіндіктің соңғы болжамға әсер ететіні туралы ешқандай түсінік бермейді. Мүмкіндік маңыздылығының есептегіші белгілі бір модельдің нәтижесі үшін жеке мүмкіндіктер әсерін есептеудің теңшелмелі алгоритмін пайдаланады. Мүмкіндік маңыздылығы +1 - -1 мәндері аралығында қалпына келеді. Теріс әсер сәйкес мүмкіндіктің нәтижеге әдеттен тыс әсер ететінін және модельден алыну керектігін білдіреді. Оң әсер мүмкіндіктің болжамға елеулі түрде әсер ететінін білдіреді. Бұл мәндер өзара қатынас коэффициенттері болып табылмайды, себебі олар басқа өлшемдерге жатады. Қосымша ақпарат алу үшін [Оңтайландыру мүмкіндігінің маңыздылығы](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance) бөлімін қараңыз.

Толық [кету тәжірибесі Azure AI галереясында қолжетімді](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).

## <a name="customer-lifetime-value-prediction"></a>Тұтынушының ғұмырлық құндылығының болжамы

Тұтынушының ғұмырлық құндылығын (CLTV) есептеу – бизнес арқылы тұтынушыларды бағалау және бөлу үшін пайдаланатын негізгі өлшемдердің бірі. Қонақ үй бизнесі үшін тұтынушыларды білген маңызды. Мысалы, жақсы клиенттерден тұратын факторларды түсіну маңызды ақпарат болып табылады. Бұл қонақ үй менеджментіне үлкен ақша төлейтін тұтынушыларын қанағаттандыру мақсатында қайсы мүмкіндіктерге назар аудару және оларды жақсарту керектігін бағалауда көмектеседі. Бұл шешімдер тікелей сатылым мен табысқа әсер етуі мүмкін.  

### <a name="definition-of-cltv"></a>CLTV анықтамасы

Бұл мысалда тұтынушының CLTV келесі 365 күнде жұмсалуы күтілетін жалпы доллар сомасы ретінде анықталады. Біз осы мәнді болжау мақсатында барлық тұтынушылар үшін соңғы үш жылдағы деректер пайдалануын жоспарлаудамыз.

### <a name="featurization"></a>Мүмкіндіктер жиыны

Бұл жағдайда мүмкіндіктер жиыны аздап кету сценарийі сияқты болады. Дегенмен белгілер мен болжалды мәндер жоғарыда анықталғаннан басқаша.

### <a name="model-selection"></a>Модельді таңдау

CLTV болжау регрессия мәселесіне жатады, себебі болжалды мән үздіксіз айнымалы оң мән болып табылады. Мүмкіндіктердің сипаттары негізінде модельді дайындау үшін бір алгоритм ретінде **Күшейтілген шешім тармағының регрессиясы**, ал басқа алгоритм ретінде **Нейронды желі регрессиясы** опциясын таңдаңыз.

## <a name="product-recommendation-or-next-best-action"></a>Өнім ұсынысы немесе келесі үздік әрекет

Қонақ үй сценарийіндегі өнім ұсынысы қонақ үй тарапынан тұтынушыларға ұсынылатын қызметтер болып түсіндіріледі. Мақсаты – тұтынушылар үшін тиісті қызметтерді барынша пайдаланатындай таңдау. Бұл бейне ағыны қызметінің пайдаланушыларына арналған бейнефильм ұсыныстарына ұқсас.

### <a name="definition-of-product-recommendation-or-next-best-action"></a>Өнім ұсынысының анықтамасы немесе келесі үздік әрекет

Қонақ үй тұтынушыларының қызығушылықтарына байланысты үздік сәйкес келетін қызметтерді ұсыну арқылы мақсатты қызмет қолданудағы доллар сомасын барынша арттыру деп анықтаймыз.

### <a name="featurization"></a>Мүмкіндіктер жиыны

Кету моделі сияқты әрбір CustomerID үшін ұсыныстарды тұрақты түрде құру мақсатында қонақ үйдің ServiceCustomerID мәнін CustomerID мәнімен біріктіреміз.

![Ұсыныс моделінің толық сипаттамасы](media/azure-machine-learning-model-featurization.png)

Деректер үш түрлі нысаннан алынады, ал мүмкіндіктер солардан шығады. Ұсыныс мәселесінің толық сипаттамасы кету не CLTV сценарийлерімен салыстырғанда ерекшеленеді. Ұсыныс моделі мүмкіндіктердің үш жиыны түрінде берілген кіріс деректерді қажет етеді.

### <a name="model-selection"></a>Модельді таңдау

Ұсыныс моделін дайындау үшін **Matchbox ұсыныс берушісін дайындау** атты алгоритмін пайдалану арқылы өнімдерді не қызметтерді болжаймыз.

![Өнім ұсынысының алгоритмі](media/azure-machine-learning-model-recommendation-algorithm.png)

**Matchbox ұсыныс берушісін дайындау** моделіне арналған үш кіріс порты дайындау қызметін пайдалану деректерін, тұтынушы сипаттамасын (қосымша) және қызмет сипаттамасын қабылдайды. Модельді бағалаудың үш түрлі жолы бар. Біреуі баға берілген элементтерді іріктеу үшін қалыптандырылған азайтылған өсім (NDCG) ұпайы есептелетін модель бағалауына арналған. Бұл сынақта NDCG ұпайы 0,97 құрайды. Басқа екі нұсқа бүкіл ұсынылатын қызметтер каталогі бойынша модель бағалануы немесе пайдаланушылар бұрын пайдаланбаған элементтер бойынша бағалау болып табылады.

Бүкіл қызметтер каталогі бойынша ұсыныстар үлестіруін қарастыра отырып, телефонның, WiFi және курьердің ұсынылатын үздік қызметтер қатарына жататынын байқаймыз. Бұл қызметті қолдану туралы деректерді таратудан анықталғанға сәйкес келеді:

![Ұсыныс моделінің шығысы](media/azure-machine-learning-model-output.png)

Бүкіл [өнім ұсынысының сынағына Azure AI галереясында қатынасуға болады.](https://gallery.azure.ai/Experiment/Recommendation-4)

## <a name="integrate-custom-models"></a>Реттемелі модельдердің үлгілері

Осы болжамдарды Customer Insights ішінде пайдалану үшін болжамдарды тұтынушы идентификаторларымен бірге **экспорттау** керек. Бастапқы деректерді экспорттаған [Azure Blob сақтау орнына экспорттаңыз](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs). Болжалды веб-қызметті ұпайларды жүйелі түрде іске қосу және жаңарту үшін жоспарлауға болады.

Тұтынушы үлгісімен жасалған деректер тұтынушының деректерін одан әрі байыту үшін қолданыла алады. Қосымша ақпаратты [Реттелетін компьютерлік оқыту модельдері](custom-models.md) бөлімінен қараңыз.


[!INCLUDE[footer-include](../includes/footer-banner.md)]