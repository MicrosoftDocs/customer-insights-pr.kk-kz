---
title: Субъект-қызметімен Azure Data Lake Storage Gen2 тіркелгісіне қосылу
description: Аудитория мәліметтеріне тіркеу кезінде өз деректер көліңізге қосу үшін аудитория мәліметтеріне арналған Azure субъект-қызметін пайдаланыңыз.
ms.date: 11/24/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: adkuppa
ms.author: adkuppa
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: c2fae278d34fa02b9168ac70dfa8dd351653245e
ms.sourcegitcommit: 6a6df62fa12dcb9bd5f5a39cc3ee0e2b3988184b
ms.translationtype: HT
ms.contentlocale: kk-KZ
ms.lasthandoff: 11/25/2020
ms.locfileid: "4644095"
---
# <a name="connect-to-an-azure-data-lake-storage-gen2-account-with-an-azure-service-principal-for-audience-insights"></a>Аудитория мәліметтері бойынша Azure субъект-қызметімен Azure Data Lake Storage Gen2 тіркелгісіне қосылыңыз

Azure қызметтерін пайдаланатын автоматтандырылған құралдарда әрдайым шектеулі рұқсаттар болуы тиіс. Бағдарламалардың толық артықшылықты пайдаланушы ретінде кіруінің орнына, Azure субъект-қызметтерін ұсынады. Сақтау тіркелгісі кілттерінің орнына Azure субхект-қызметін пайдаланып Azure Data Lake Storage Gen2 тіркелгісімен аудитория мәліметтерін қосу жолдары туралы оқыңыз. 

[Common Data Model қалтасын деректер көзі ретінде қауіпсіз түрде қосу](connect-common-data-model.md) немесе [жаңасын жасау немесе бұрыннан бар ортаны жаңарту үшін](manage-environments.md#create-an-environment-in-an-existing-organization) субъект-қызметін пайдалануға болады.

Субъект-қызметін жасау үшін Azure жазылымына арналған әкімші рұқсаттары қажет.

## <a name="create-azure-service-principal-for-audience-insights"></a>Аудитория мәліметтеріне арналған Azure субъект-қызметін жасаңыз

Аудитория мәліметтеріне арналған жаңа субъект-қызметін жасау алдында ұйымда бұрыннан болуын тексеріңіз.

### <a name="look-for-an-existing-service-principal"></a>Бар субъект-қызметін іздеңіз

1. [Azure әкімші порталына](https://portal.azure.com) өтіп, ұйымыңызға кіріңіз.

2. Azure қызметтерінен **Azure Active Directory** таңдаңыз.

3. **Басқару** тармағында **Кәсіпорын бағдарламалары** опциясын таңдаңыз.

4. Аудитория мәліметтерінің бірінші тараптағы бағдарлама идентификаторын `0bfc4568-a4ba-4c58-bd3e-5d3e76bd7fff` немесе `Dynamics 365 AI for Customer Insights` атауын іздеңіз.

5. Егер сәйкес жазбаны тапсаңыз, бұл аудитория мәліметтеріне арналған субъект-қызметі бар дегенді білдіреді. Оны қайта жасаудың қажеті жоқ.
   
   :::image type="content" source="media/ADLS-SP-AlreadyProvisioned.png" alt-text="Қолданыстағы субъект-қызметін көрсететін скриншот.":::
   
6. Егер ешбір нәтиже қайтарылмаса, жаңа субъект-қызметін жасаңыз.

### <a name="create-a-new-service-principal"></a>Жаңа субъект-қызметін жасау

1. **Графикке арналған Azure Active Directory PowerShell** соңғы нұсқасын орнатыңыз. Қосымша ақпарат алу үшін [Графикке арналған Azure Active Directory PowerShell](https://docs.microsoft.com/powershell/azure/active-directory/install-adv2) бөлімін қараңыз.
   - Дербес компьютерде пернетақтада Windows кілтін таңдап, **Windows PowerShell** және **Әкімші ретінде іске қосу** параметрлерін іздеңіз.
   
   - Ашылатын PowerShell терезесінде `Install-Module AzureAD` енгізіңіз.

2. Azure AD PowerShell модулімен аудитория мәліметтері бойынша субъект-қызмет жасаңыз.
   - PowerShell терезесінде `Connect-AzureAD -TenantId "[your tenant ID]" -AzureEnvironmentName Azure` енгізіңіз. «Қатысушы идентификаторын» субъект-қызмет жасау қажет қатысушының нақты идентификаторымен ауыстырыңыз. Орта атауының `AzureEnvironmentName` параметрі міндетті емес,
  
   - `New-AzureADServicePrincipal -AppId "0bfc4568-a4ba-4c58-bd3e-5d3e76bd7fff" -DisplayName "Dynamics 365 AI for Customer Insights"` енгізіңіз. Бұл пәрмен таңдалған қатысушыда аудитория мәліметтері бойынша субъект-қызметін жасайды.  

## <a name="grant-permissions-to-the-service-principal-to-access-the-storage-account"></a>Сақтау тіркелгісіне қатынасу үшін субъект-қызметіне рұқсаттар беріңіз

Аудитория мәліметтерінде пайдаланылатын сақтау тіркелгісі бойынша субъект-қызметке рұқсаттар беру үшін Azure порталына өтіңіз.

1. [Azure әкімші порталына](https://portal.azure.com) өтіп, ұйымыңызға кіріңіз.

1. Аудитория мәліметтері бойынша субъект-қызмет қатынаса алатын сақтау тіркелгісін ашыңыз.

1. Навигация тақтасынан **Қатынасты басқару (IAM)** таңдап, **Қосу** > **Рөл тағайындауын қосу** тармағын таңдаңыз.
   
   :::image type="content" source="media/ADLS-SP-AddRoleAssignment.png" alt-text="Рөл тағайындауды қосу кезінде Azure порталын көрсететін скриншот.":::
   
1. **Рөл тағайындауды қосу** тақтасында келесі сипаттарды орнатыңыз:
   - Рөл: *Blob сақтау құралы деректерін қосушы*
   - Мыналарға қатынасу рұқсатын тағайындаңыз: *Пайдаланушы, топ немесе субъект-қызмет*
   - Таңдаңыз: *Customer Insights жүйесіне арналған Dynamics 365 AI* ([сіз жасаған субъект-қызмет](#create-a-new-service-principal))

1.  **Сақтау** опциясын таңдаңыз.

Өзгерістерді үлгілеу 15 минутқа созылуы мүмкін.

## <a name="enter-the-azure-resource-id-or-the-azure-subscription-details-in-the-storage-account-attachment-to-audience-insights"></a>Аудитория мәліметтеріне сақтау тіркелгісін тіркеуде Azure ресурс идентификаторын немесе Azure жазылымы мәліметтерін енгізіңіз.

[Нәтиже деректерін сақтау](manage-environments.md) үшін немесе [оны деректер көзі ретінде пайдалану](connect-common-data-service-lake.md) үшін аудитория мәліметтерінде Azure Data Lake сақтау тіркелгісін тіркеңіз. Azure Data Lake опциясын таңдау ресурстарға негізделген немесе жазылымға негізделген тәсілдерді таңдауға мүмкіндік береді.

Таңдалған тәсіл туралы қажетті ақпаратты беру үшін төмендегі қадамдарды орындаңыз.

### <a name="resounce-based-storage-account-connection"></a>Ресурсқа негізделген сақтау тіркелгісінің байланысы

1. [Azure әкімші порталына](https://portal.azure.com) өтіп, жазылымға кіріңіз де, сақтау тіркелгісін ашыңыз.

1. Навигация тақтасында **Параметрлер** > **Сипаттар** тармағына өтіңіз.

1. Сақтау тіркелгісінің ресурстық идентификаторының мәнін көшіріңіз.

   :::image type="content" source="media/ADLS-SP-ResourceId.png" alt-text="Сақтау тіркелгісінің ресурстық идентификаторын көшіріңіз.":::

1. Аудитория мәліметтерінде ресурс идентификаторын сақтау тіркелгісінің қосылу экранында көрсетілетін ресурстар өрісіне енгізіңіз.

   :::image type="content" source="media/ADLS-SP-ResourceIdConnection.png" alt-text="Сақтау тіркелгісінің ресурстық идентификаторының ақпаратын енгізіңіз.":::   
   
1. Сақтау тіркелгісін тіркеу үшін аудитория мәліметтеріндегі қалған қадамдарды жалғастырыңыз.

### <a name="subscription-based-storage-account-connection"></a>Жазылымға негізделген сақтау тіркелгісінің байланысы

1. [Azure әкімші порталына](https://portal.azure.com) өтіп, жазылымға кіріңіз де, сақтау тіркелгісін ашыңыз.

1. Навигация тақтасында **Параметрлер** > **Сипаттар** тармағына өтіңіз.

1. Аудитория мәліметтерінде дұрыс мәндерді таңдау үшін сақтау тіркелгісінің **Жазылым**, **Ресурс тобы** және **Атауы** элементтерін қарап шығыңыз.

1. Аудитория мәліметтерінде сақтау тіркелгісін тіркеу кезінде мәндерді немесе сәйкес өрістерді таңдаңыз.

   :::image type="content" source="media/ADLS-SP-SubscriptionConnection.png" alt-text="Сақтау тіркелгісінің ресурстық идентификаторының ақпаратын енгізіңіз.":::
   
1. Сақтау тіркелгісін тіркеу үшін аудитория мәліметтеріндегі қалған қадамдарды жалғастырыңыз.
